<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="ProtossGP32">
<meta name="dcterms.date" content="2023-02-20">

<title>CIFO - Web Applications - LAB#SE03-2: Library/Book, Expand Model</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../java-exercises/Principles/01-abstraction.html" rel="next">
<link href="../../java-exercises/Labs/java-se03-1.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">CIFO - Web Applications</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-devops-guides" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">DevOps guides</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-devops-guides">    
        <li>
    <a class="dropdown-item" href="../../devops-guides/software-installation.html">
 <span class="dropdown-text">Software installation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../devops-guides/mint-vm-provisioning.html">
 <span class="dropdown-text">Virtual Machine Provisioning</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Documentation</li>
        <li>
    <a class="dropdown-item" href="../../devops-guides/documentation/quarto-quick-guide.html">
 <span class="dropdown-text">Quarto - Quick guide</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Self Hosted Project</li>
        <li>
    <a class="dropdown-item" href="../../devops-guides/self-hosted-project/docker-software-deployment.html">
 <span class="dropdown-text">Docker software deployment</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Version Control Software</li>
        <li>
    <a class="dropdown-item" href="../../devops-guides/version-control-software/git-useful-tips.html">
 <span class="dropdown-text">GIT useful tips</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../devops-guides/version-control-software/github-credentials.html">
 <span class="dropdown-text">GitHub - Configuring SSH credentials</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Virtualization</li>
        <li>
    <a class="dropdown-item" href="../../devops-guides/virtualization/harvester.html">
 <span class="dropdown-text">Harvester</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../devops-guides/virtualization/proxmox.html">
 <span class="dropdown-text">Proxmox VE</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-java-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Java exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-java-exercises">    
        <li class="dropdown-header">APIs</li>
        <li>
    <a class="dropdown-item" href="../../java-exercises/APIs/api-rest.html">
 <span class="dropdown-text">API REST</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Concepts</li>
        <li>
    <a class="dropdown-item" href="../../java-exercises/Concepts/pojo-bean-entity.html">
 <span class="dropdown-text">Differences between a POJO, a JavaBean and an Entity</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Concepts/object-creation.html">
 <span class="dropdown-text">Object creation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Concepts/what-is-a-class.html">
 <span class="dropdown-text">What is a class?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Concepts/what-is-a-model.html">
 <span class="dropdown-text">What is a model?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Concepts/what-is-coupling-and-cohesion.html">
 <span class="dropdown-text">What is coupling and cohesion?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Concepts/what-is-ddd.html">
 <span class="dropdown-text">What is DDD?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Concepts/what-is-maven.html">
 <span class="dropdown-text">What is Maven?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Concepts/what-is-tdd.html">
 <span class="dropdown-text">What is TDD?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Concepts/what-is-the-static-modifier.html">
 <span class="dropdown-text">What is the static modifier?</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Databases</li>
        <li>
    <a class="dropdown-item" href="../../java-exercises/databases/00-mongodb.html">
 <span class="dropdown-text">00 - MongoDB</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Design Patterns</li>
        <li>
    <a class="dropdown-item" href="../../java-exercises/Design-patterns/uml.html">
 <span class="dropdown-text">UML</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Frameworks</li>
        <li>
    <a class="dropdown-item" href="../../java-exercises/frameworks/quarkus/00-what-is-quarkus.html">
 <span class="dropdown-text">Quarkus</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/frameworks/spring-boot/00-what-is-spring-boot.html">
 <span class="dropdown-text">Spring Boot</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Frontend</li>
        <li>
    <a class="dropdown-item" href="../../java-exercises/frontend/00-Introduction.html">
 <span class="dropdown-text">00 - Frontend - Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/frontend/engines/00-thymeleaf.html">
 <span class="dropdown-text">Engines</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Labs</li>
        <li>
    <a class="dropdown-item" href="../../java-exercises/Labs/java-sb00-6.html">
 <span class="dropdown-text">LAB#SB00-6: Rest &amp; MongoDB</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Labs/java-se00-2.html">
 <span class="dropdown-text">LAB#SE00-1: Maven Clinic</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Labs/java-se00-1.html">
 <span class="dropdown-text">LAB#SE00-1: Maven Person</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Labs/java-se00-3.html">
 <span class="dropdown-text">LAB#SE00-3: Maven Library model</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Labs/java-se01-1.html">
 <span class="dropdown-text">LAB#SE01-1: Maven Person and Account</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Labs/java-se02-1.html">
 <span class="dropdown-text">LAB#SE02-1: Movie/Review, model</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Labs/java-se03-1.html">
 <span class="dropdown-text">LAB#SE03-1: Library/Book core model</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Labs/java-se03-2.html">
 <span class="dropdown-text">LAB#SE03-2: Library/Book, Expand Model</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Principles</li>
        <li>
    <a class="dropdown-item" href="../../java-exercises/Principles/01-abstraction.html">
 <span class="dropdown-text">Abstraction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Principles/00-encapsulation.html">
 <span class="dropdown-text">Encapsulation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Principles/02-inheritance.html">
 <span class="dropdown-text">Inheritance</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../java-exercises/Principles/03-polymorphism.html">
 <span class="dropdown-text">Polymorphism</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-project-management" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Project Management</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-project-management">    
        <li>
    <a class="dropdown-item" href="../../project-management/decision-making.html">
 <span class="dropdown-text">Decision Making</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../project-management/scrum-management.html">
 <span class="dropdown-text">Scrum management</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../project-management/useful-questions.html">
 <span class="dropdown-text">Useful questions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../project-management/project-life-cycle.html">
 <span class="dropdown-text">What is the project lifecycle?</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-team-projects" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Team projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-team-projects">    
        <li>
    <a class="dropdown-item" href="../../team-projects/00-game-tracker.html">
 <span class="dropdown-text">First project - GameTracker</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-miscellaneous" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Miscellaneous</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-miscellaneous">    
        <li>
    <a class="dropdown-item" href="../../miscellaneous/00-mind-management-getting-things-done.html">
 <span class="dropdown-text">00 - Mind Management and Getting Things Done</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Weekly Planning</li>
        <li>
    <a class="dropdown-item" href="../../miscellaneous/weekly-planning/00-template.html">
 <span class="dropdown-text">00 - Week template</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../miscellaneous/weekly-planning/01-week-01.html">
 <span class="dropdown-text">01 - Week 01</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../miscellaneous/weekly-planning/02-week-02.html">
 <span class="dropdown-text">02 - Week 02</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../miscellaneous/weekly-planning/03-week-03.html">
 <span class="dropdown-text">03 - Week 03</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../miscellaneous/weekly-planning/04-week-04.html">
 <span class="dropdown-text">04 - Week 04</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-walkthrough" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Walkthrough</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-walkthrough">    
        <li>
    <a class="dropdown-item" href="../../walkthrough/walkthrough.html">
 <span class="dropdown-text">Hello, Quarto</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/protossgp32"><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
                  <a href="" class="quarto-reader-toggle nav-link" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">LAB#SE03-2: Library/Book, Expand Model</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">APIs</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/APIs/api-rest.html" class="sidebar-item-text sidebar-link">API REST</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Concepts</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Concepts/pojo-bean-entity.html" class="sidebar-item-text sidebar-link">Differences between a POJO, a JavaBean and an Entity</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Concepts/object-creation.html" class="sidebar-item-text sidebar-link">Object creation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Concepts/what-is-a-class.html" class="sidebar-item-text sidebar-link">What is a class?</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Concepts/what-is-a-model.html" class="sidebar-item-text sidebar-link">What is a model?</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Concepts/what-is-coupling-and-cohesion.html" class="sidebar-item-text sidebar-link">What is coupling and cohesion?</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Concepts/what-is-ddd.html" class="sidebar-item-text sidebar-link">What is DDD?</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Concepts/what-is-maven.html" class="sidebar-item-text sidebar-link">What is Maven?</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Concepts/what-is-tdd.html" class="sidebar-item-text sidebar-link">What is TDD?</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Concepts/what-is-the-static-modifier.html" class="sidebar-item-text sidebar-link">What is the static modifier?</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Databases</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/databases/00-mongodb.html" class="sidebar-item-text sidebar-link">00 - MongoDB</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">Design Patterns</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Design-patterns/uml.html" class="sidebar-item-text sidebar-link">UML</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">Frameworks</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">Quarkus</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/frameworks/quarkus/00-what-is-quarkus.html" class="sidebar-item-text sidebar-link">00 - What is Quarkus?</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">Spring Boot</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/frameworks/spring-boot/00-what-is-spring-boot.html" class="sidebar-item-text sidebar-link">00 - What is Spring Boot?</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/frameworks/spring-boot/01-create-spring-boot-project.html" class="sidebar-item-text sidebar-link">01 - Creating a Spring Boot project</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/frameworks/spring-boot/02-create-full-spring-boot-with-H2-and-thymeleaf.html" class="sidebar-item-text sidebar-link">02 - Creating a Spring Boot project with H2 and ThyMeLeaf</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/frameworks/spring-boot/03-spring-security.html" class="sidebar-item-text sidebar-link">03 - Spring Security</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/frameworks/spring-boot/04-spring-boot-jpa-H2.html" class="sidebar-item-text sidebar-link">04 - Spring Boot with JPA and H2</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/frameworks/spring-boot/05-spring-boot-jpa-composition.html" class="sidebar-item-text sidebar-link">05 - Spring Boot and JPA composition</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/frameworks/spring-boot/06-spring-boot-rest-api.html" class="sidebar-item-text sidebar-link">05 - Spring Boot and Rest API</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/frameworks/spring-boot/07-configure-spring-boot-test-profiles.html" class="sidebar-item-text sidebar-link">07 - Configure Spring Boot Test Profiles</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/frameworks/spring-boot/08-spring-boot-controller.html" class="sidebar-item-text sidebar-link">08 - Configure Spring Boot Controllers</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/frameworks/spring-boot/09-http-session.html" class="sidebar-item-text sidebar-link">09 - HTTP sessions</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/frameworks/spring-boot/10-spring-data-and-databases.html" class="sidebar-item-text sidebar-link">10 - Data and Databases - Spring Data</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">Frontend</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/frontend/00-Introduction.html" class="sidebar-item-text sidebar-link">00 - Frontend - Introduction</a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">Engines</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/frontend/engines/00-thymeleaf.html" class="sidebar-item-text sidebar-link">01 - Java template engine - Thymeleaf</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">Labs</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Labs/java-sb00-6.html" class="sidebar-item-text sidebar-link">LAB#SB00-6: Rest &amp; MongoDB</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Labs/java-se00-2.html" class="sidebar-item-text sidebar-link">LAB#SE00-1: Maven Clinic</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Labs/java-se00-1.html" class="sidebar-item-text sidebar-link">LAB#SE00-1: Maven Person</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Labs/java-se00-3.html" class="sidebar-item-text sidebar-link">LAB#SE00-3: Maven Library model</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Labs/java-se01-1.html" class="sidebar-item-text sidebar-link">LAB#SE01-1: Maven Person and Account</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Labs/java-se02-1.html" class="sidebar-item-text sidebar-link">LAB#SE02-1: Movie/Review, model</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Labs/java-se03-1.html" class="sidebar-item-text sidebar-link">LAB#SE03-1: Library/Book core model</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Labs/java-se03-2.html" class="sidebar-item-text sidebar-link active">LAB#SE03-2: Library/Book, Expand Model</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true">Principles</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Principles/01-abstraction.html" class="sidebar-item-text sidebar-link">Abstraction</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Principles/00-encapsulation.html" class="sidebar-item-text sidebar-link">Encapsulation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Principles/02-inheritance.html" class="sidebar-item-text sidebar-link">Inheritance</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../java-exercises/Principles/03-polymorphism.html" class="sidebar-item-text sidebar-link">Polymorphism</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#interfaces" id="toc-interfaces" class="nav-link" data-scroll-target="#interfaces">Interfaces</a></li>
  <li><a href="#abstract-class" id="toc-abstract-class" class="nav-link" data-scroll-target="#abstract-class">Abstract class</a></li>
  <li><a href="#uml" id="toc-uml" class="nav-link" data-scroll-target="#uml">UML</a>
  <ul class="collapse">
  <li><a href="#previous-drafts" id="toc-previous-drafts" class="nav-link" data-scroll-target="#previous-drafts">Previous drafts</a></li>
  <li><a href="#current-uml" id="toc-current-uml" class="nav-link" data-scroll-target="#current-uml">Current UML</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#migrating-to-springboot" id="toc-migrating-to-springboot" class="nav-link" data-scroll-target="#migrating-to-springboot">Migrating to SpringBoot</a>
  <ul class="collapse">
  <li><a href="#user-interface" id="toc-user-interface" class="nav-link" data-scroll-target="#user-interface">User interface</a></li>
  <li><a href="#controllers" id="toc-controllers" class="nav-link" data-scroll-target="#controllers">Controllers</a></li>
  <li><a href="#databases" id="toc-databases" class="nav-link" data-scroll-target="#databases">Databases</a>
  <ul class="collapse">
  <li><a href="#creating-entities" id="toc-creating-entities" class="nav-link" data-scroll-target="#creating-entities">Creating entities</a></li>
  </ul></li>
  <li><a href="#defining-the-use-cases" id="toc-defining-the-use-cases" class="nav-link" data-scroll-target="#defining-the-use-cases">Defining the use cases</a>
  <ul class="collapse">
  <li><a href="#creating-a-publication" id="toc-creating-a-publication" class="nav-link" data-scroll-target="#creating-a-publication">Creating a publication</a></li>
  <li><a href="#creating-a-libary-member" id="toc-creating-a-libary-member" class="nav-link" data-scroll-target="#creating-a-libary-member">Creating a Libary Member</a></li>
  </ul></li>
  <li><a href="#updating-publications-or-library-members" id="toc-updating-publications-or-library-members" class="nav-link" data-scroll-target="#updating-publications-or-library-members">Updating publications or library members</a></li>
  <li><a href="#creating-borrows" id="toc-creating-borrows" class="nav-link" data-scroll-target="#creating-borrows">Creating Borrows</a>
  <ul class="collapse">
  <li><a href="#create-borrow-entity-and-repository" id="toc-create-borrow-entity-and-repository" class="nav-link" data-scroll-target="#create-borrow-entity-and-repository">Create Borrow Entity and Repository</a></li>
  <li><a href="#create-borrow-service-and-controller" id="toc-create-borrow-service-and-controller" class="nav-link" data-scroll-target="#create-borrow-service-and-controller">Create Borrow Service and Controller</a></li>
  </ul></li>
  <li><a href="#updating-a-borrow" id="toc-updating-a-borrow" class="nav-link" data-scroll-target="#updating-a-borrow">Updating a <code>Borrow</code></a></li>
  <li><a href="#using-http-session-to-store-user-information" id="toc-using-http-session-to-store-user-information" class="nav-link" data-scroll-target="#using-http-session-to-store-user-information">Using HTTP session to store User information</a></li>
  <li><a href="#log-in-log-out-process" id="toc-log-in-log-out-process" class="nav-link" data-scroll-target="#log-in-log-out-process">Log in / Log out process</a></li>
  </ul></li>
  <li><a href="#integrating-mongodb" id="toc-integrating-mongodb" class="nav-link" data-scroll-target="#integrating-mongodb">Integrating MongoDB</a>
  <ul class="collapse">
  <li><a href="#dependencies" id="toc-dependencies" class="nav-link" data-scroll-target="#dependencies">Dependencies</a></li>
  <li><a href="#changes-in-current-classes" id="toc-changes-in-current-classes" class="nav-link" data-scroll-target="#changes-in-current-classes">Changes in current classes</a></li>
  <li><a href="#repositories-for-mongodb" id="toc-repositories-for-mongodb" class="nav-link" data-scroll-target="#repositories-for-mongodb">Repositories for MongoDB</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/protossgp32/CIFO-Web-Applications/edit/main/docs/quarto-examples/java-exercises/Labs/java-se03-2.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/protossgp32/CIFO-Web-Applications/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">LAB#SE03-2: Library/Book, Expand Model</h1>
  <div class="quarto-categories">
    <div class="quarto-category">javase</div>
    <div class="quarto-category">lab</div>
    <div class="quarto-category">inheritance</div>
    <div class="quarto-category">JPA</div>
    <div class="quarto-category">H2</div>
    <div class="quarto-category">Spring Boot</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>ProtossGP32 </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 20, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Context</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Goal</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Tasks</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Optional</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p><strong>Basic understanding of Java programming language is required</strong>, as well as some familiarity with <strong>Maven or Gradle for managing dependencies</strong> and building the project.</p>
<p><strong>Use of Interfaces and Abstract classes</strong> to implement features.</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p><strong>Describe the required models</strong> that might define the solution to a Library implementation. <strong>Create multiple classes in Java</strong> using the most convenient entity relationship between them to implement the solution.</p>
<p><strong>Test these classes</strong> using JUnit.</p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<ol class="example" type="1">
<li>Create <strong>a new Maven or Gradle project</strong> and setting up the project structure</li>
<li>Modify the project’s <code>pom.xml</code> or <code>build.gradle</code> file to import necessary dependencies, including <strong>JUnit</strong> for testing</li>
<li>Implement the required classes in Java</li>
<li>Implement User interactive interfaces for each manager</li>
<li>Write <strong>JUnit tests</strong> to verify that classes work as expected</li>
</ol>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<ul>
<li><strong>Allow the user to input data via the console</strong>, rather than using <code>hard-coded test data</code> in JUnit tests</li>
</ul>
</div>
</div>
</div>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>In <code>LibraryProject</code>, the <code>User</code> and <code>Staff</code> classes could have different <code>operations</code> that they are authorized/able to perform.</p>
<p>The <code>User</code> class could have the following operations:</p>
<ul>
<li>Search for books</li>
<li>Borrow a book</li>
<li>Return a book</li>
<li>Check the status of borrowed books</li>
<li>Update personal information</li>
</ul>
<p>The <code>Staff</code> class could have the following operations:</p>
<ul>
<li>Add a new book</li>
<li>Remove a book</li>
<li>Update the book details</li>
<li>Register a new user</li>
<li>Remove a user</li>
<li>Update the user details</li>
<li>Generate reports on library operations</li>
</ul>
<p>To <code>implement</code> these operations, we could define three separate <code>interfaces</code>:</p>
<ul>
<li>UserOperations</li>
<li>StaffOperations</li>
<li>GeneralOperations</li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
In case of doubt…
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember, <strong>Interfaces</strong> have no state, thus they don’t have variables (any attribute defined in an Interface is treated as a constant), and they are responsible of telling the classes that implement it what methods to support.</p>
<p>If you need to keep track of the state of your instances (i.e.&nbsp;attributes), then go for the <strong>abstract class</strong> and extend it to the required subclasses.</p>
<p>Here are some good points regarding Interfaces and Abstract classes:</p>
<ul>
<li><a href="https://coderanch.com/t/178630/certification/Instance-variables-interface">Instance variables in interface:</a> It’s a risky approach because they aren’t treated as variables but <code>final static</code> (i.e, constants). If you need to define variables for your classes as well as mandatory methods implementation, then go for the <strong>Abstract class approach</strong></li>
</ul>
</div>
</div>
<section id="interfaces" class="level2">
<h2 class="anchored" data-anchor-id="interfaces">Interfaces</h2>
<p>The three interfaces <code>GeneralOperations</code>, <code>UserOperations</code> and <code>StaffOperations</code> provide a clear separation of concerns and responsibilities within the library management system.</p>
<blockquote class="blockquote">
<p><code>GeneralOperations</code> <code>interface</code> provides methods that are commonly used by both users and staff, such as searching for books and creating an account.</p>
</blockquote>
<blockquote class="blockquote">
<p><code>UserOperations</code> <code>interface</code> includes methods that are specific to users, such as updating personal information, borrowing and returning books, and checking their borrowed books.</p>
</blockquote>
<blockquote class="blockquote">
<p><code>StaffOperations</code> <code>interface</code> includes methods that are specific to staff members, such as adding, removing, and updating book details, as well as registering and updating user details and generationg reports.</p>
</blockquote>
<p>By separating these different functionailities into interfaces, <strong>it becomes easier to implement and maintain the system.</strong></p>
<p>Interfaces allow the developers to implement their features knowing beforehand the expected available methods of future classes.</p>
</section>
<section id="abstract-class" class="level2">
<h2 class="anchored" data-anchor-id="abstract-class">Abstract class</h2>
<p>Finally, the <code>LibraryMember</code> abstract class is a parent class for users and staff members, which includes common fields such as id, address, and phoneNumber.</p>
<p>By defining these fields in an <code>abstract</code> class, it allows for different types of users and staff members to inherit them and <strong>avoid duplication of code.</strong></p>
</section>
<section id="uml" class="level2">
<h2 class="anchored" data-anchor-id="uml">UML</h2>
<section id="previous-drafts" class="level3">
<h3 class="anchored" data-anchor-id="previous-drafts">Previous drafts</h3>
<p>The <strong>two UML diagrams</strong> describe the <strong>core features</strong> of a libraryProject, specifically the <strong>use cases</strong> for borrowing and issuing books, as well as the roles and responsibilities of users and librarians/staff members.</p>
<blockquote class="blockquote">
<p>The first diagram, <code>Core features: borrow and issue</code>, depicts the <strong>interaction</strong> between the user and the system, as well as the system and the librarian:</p>
</blockquote>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
TODO
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create link to the previous UML</p>
</div>
</div>
<blockquote class="blockquote">
<p>The second diagram, <code>Core features: user and librarian (staff)</code>, expands on the <strong>roles</strong> and <strong>responsibilities</strong> of users and librarians/staff members.</p>
</blockquote>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
TODO
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create link to the previous UML</p>
</div>
</div>
</section>
<section id="current-uml" class="level3">
<h3 class="anchored" data-anchor-id="current-uml">Current UML</h3>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
TODO
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create new UML</p>
</div>
</div>
<section id="publications" class="level4">
<h4 class="anchored" data-anchor-id="publications">Publications</h4>
<div class="cell">
<div class="cell-output-display">
<div>
<p>
</p><pre class="mermaid mermaid-js" data-tooltip-selector="#mermaid-tooltip-1">classDiagram
    direction BT
    %% Interface
    class PublicationOperations {
        &lt;&lt;interface&gt;&gt;
        + publish() void
    }
    %% Abstract class
    class Publication {
        &lt;&lt;abstract&gt;&gt;
        - String id
        - String title
        - Author author
        - LocalDate publicationDate
        - String format
        + getId() String
        + getTitle() String
        + getAuthor() Author
        + getPublicationDate() LocalDate
        + getFormat() String
    }

    Publication ..&gt; PublicationOperations

    %% Publication Entity classes
    class Book {
        - String ISBN
        - int pages
        - int genre
        + getISBN() String
        + getPages() int
        + getGenre() String

    }
    class CD {
        - int duration
        - int numberOfTracks
        + getDuration() int
        + getNumberOfTracks() int
    }
    class DVD {
        - int duration
        + getDuration() int
    }

    Book ..&gt; Publication
    CD ..&gt; Publication
    DVD ..&gt; Publication

</pre>
<div id="mermaid-tooltip-1" class="mermaidTooltip">

</div>
<p></p>
</div>
</div>
</div>
</section>
<section id="library-members" class="level4">
<h4 class="anchored" data-anchor-id="library-members">Library Members</h4>
<div class="cell">
<div class="cell-output-display">
<div>
<p>
</p><pre class="mermaid mermaid-js" data-tooltip-selector="#mermaid-tooltip-2">classDiagram
    direction BT

    %% Relationships
    LibraryMember ..&gt; GeneralOperations
    LibraryMember ..&gt; Person

    Staff ..o StaffMember
    StaffMember ..&gt; StaffOperations
    StaffMember ..&gt; LibraryMember

    User ..o LibraryMember
    User ..&gt; BorrowOperations
    
    Librarian ..o StaffMember
    Librarian ..&gt; BorrowOperations



    %% Interfaces
    class GeneralOperations {
        &lt;&lt;interface&gt;&gt;
        + createAccount(): void
        + searchPublications(query: String): void
    }

    class BorrowOperations {
        &lt;&lt;interface&gt;&gt;
        + createBorrow(item: Publication) void
        + returnBorrow(item: Publication) void
        + updateBorrow(item: Publication) void

    }

    class StaffOperations {
        &lt;&lt;interface&gt;&gt;
        + addPublication(item: Publication) void
        + removePublication(item: Publication) void
        + updatePublication(item: Publication) void
        + registerMember(member: LibraryMember) void
        + removeMember(member: LibraryMember) void
        + updateMember(member: LibraryMember) void
        + generateReports() void
    }

    %% Abstract class
    class Person {
        &lt;&lt;abstract&gt;&gt;
        - firstName: String
        - lastName: String
        - nationality: String
        - birthdate: LocalDate
    }

    class LibraryMember {
        &lt;&lt;abstract&gt;&gt;
        - id: String
        - address: String
        - phoneNumber: String
    }

    class StaffMember {
        &lt;&lt;abstract&gt;&gt;
        - double: salary
    }

    %% Entities
    class User {
        - String: mail
        - String: password
    }

    class Staff {
    }

    class Librarian {
    }

</pre>
<div id="mermaid-tooltip-2" class="mermaidTooltip">

</div>
<p></p>
</div>
</div>
</div>
</section>
</section>
</section>
</section>
<section id="migrating-to-springboot" class="level1">
<h1>Migrating to SpringBoot</h1>
<p>With the core model defined and its functionalities, let’s migrate the project to a SpringBoot project to enable Web features, so we can use REST controllers to access the application and its databases.</p>
<section id="user-interface" class="level2">
<h2 class="anchored" data-anchor-id="user-interface">User interface</h2>
<p>Let’s define the different <strong>domains</strong> that are accessible through a user interface.</p>
<ul>
<li>In a web interface, domains could be:
<ul>
<li><code>/user</code> with a private access, only available to Library Users</li>
<li><code>/librarian</code> with a private access, only available to Librarians</li>
<li><code>/web</code> with a public access, available to any person that access the webpage</li>
</ul></li>
</ul>
</section>
<section id="controllers" class="level2">
<h2 class="anchored" data-anchor-id="controllers">Controllers</h2>
<p>In the backend, we need controllers for <code>user</code> and <code>librarian</code>, with access to the Library <code>db</code>.</p>
<p>Requests can be of multiple forms, such as API Rest, HTML, websockets…</p>
<p>Required methods to resolve the requests coming from the frontend must be implemented into each actor (<code>user</code> and <code>library</code>). These methods invoke other classes like <code>@Service</code> and <code>@Repository</code>, that have the <code>utils</code> required to resolve the requests.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
<code>@Service</code> and <code>@Repository</code> here are like the <code>Manager</code> classes
</div>
</div>
<div class="callout-body-container callout-body">
<p>We treat them as the source of all utilities that execute the response logic</p>
</div>
</div>
</section>
<section id="databases" class="level2">
<h2 class="anchored" data-anchor-id="databases">Databases</h2>
<p>For this project, we’ll be using H2. H2 is a Java SQL database with the following main features:</p>
<ul>
<li>Very fast, open source, JDBC API</li>
<li>Embedded and serer modes; in-memory databases</li>
<li>Browser based Console application</li>
<li>Small footprint: around 2.5 MB jar file size</li>
</ul>
<section id="creating-entities" class="level3">
<h3 class="anchored" data-anchor-id="creating-entities">Creating entities</h3>
<p>We need to define entities that will persist inside DB: - Any <code>Publication</code> subclass object - Any <code>LibraryMember</code> subclass object: - This includes <code>User</code>, <code>Librarian</code> and <code>Staff</code> - <code>Borrows</code> objects</p>
<p>Each entity must define its primary key with the <code>@Id</code> annotation. When inheritance is present, then the parent class should define it as well as the <code>@Inheritance</code> type.</p>
<ul>
<li>If the parent class isn’t going to be instantiated, only define the <code>@MappedSuperClass</code> annotation to allow subclasses to inherit its JPA attibutes</li>
<li>Each first class that defines a new DB table where to store this’ or their subclasses’ instances must define the following annotations:
<ul>
<li><code>@Entity</code>, even though this class doesn’t create instances (mandatori for its subclasses)</li>
<li><code>@Table</code> name where to store all instances</li>
<li><code>@Inheritance</code> strategy, such as <code>SINGLE_TABLE</code> to store all subclass entities into this single table
<ul>
<li>If <code>SINGLE_TABLE</code> is selected, then the parent class must define <code>@DiscriminatorColumn</code> with a name and its value type. Child classes must then define the proper <code>@DiscriminatorValue</code> that will be inserted in the previous column when inserted into the table</li>
<li>If <code>TABLE_PER_CLASS</code> is selected, then each subclass will create its own <code>@Table</code> inside the DB. If no <code>@Table</code> annotation is defined in subclasses, then the subclass name is used as its table name</li>
</ul></li>
</ul></li>
</ul>
<p>When there’s a composition relationship between classes, then we have to define its multiplicity using the <code>@ManyToMany</code>, <code>@OneToOne</code>, <code>@ManyToOne</code> or <code>@OneToMany</code> annotations.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
ERROR when defining <code>@ManyToOne</code> relation
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="ex">j.LocalContainerEntityManagerFactoryBean</span> : Failed to initialize JPA EntityManagerFactory: Association <span class="st">'com.springbootlab0.approach_1.domain.Publication.author'</span> targets an unknown entity named <span class="st">'com.springbootlab0.approach_1.domain.Author'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This error is due to bad annotations between inherited classes, not a <code>@ManyToOne</code> issue. <code>Publication</code> class couldn’t find the <code>Author</code> entity because <code>Person</code> superclass and its subclass <code>Author</code> were conflicting with the <code>@Inheritance</code> and <code>@MappedSuperClass</code> annotations.</p>
<p>Once fixed, an <code>AUTHOR_TABLE</code> is created in the H2 DB and <code>Publication</code> instance can correctly map the <code>Author</code> attribute to the <code>AUTHOR_ID</code> field in the previous table.</p>
</div>
</div>
<p>The final JPA entity and inheritance diagram is as follows:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<p>

</p><pre class="mermaid mermaid-js" data-tooltip-selector="#mermaid-tooltip-3">classDiagram
    direction BT
    %% Abstract class
    class Publication {
        \@Entity(name = "Publication")
        \@Table(name = "PUBLICATION_TABLE")
        \@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
        \@DiscriminatorColumn(name = "PUBLICATION_TYPE", discriminatorType = DiscriminatorType.STRING)
    }

    %% Publication Entity classes
    class Book {
        \@Entity(name = "Book")
        \@DiscriminatorValue(value = "BOOK")
    }
    class CD {
        \@Entity(name = "CD")
        \@DiscriminatorValue(value = "CD")
    }
    class DVD {
        \@Entity(name = "DVD")
        \@DiscriminatorValue(value = "DVD")
    }

    Book ..&gt; Publication
    CD ..&gt; Publication
    DVD ..&gt; Publication

</pre>
<div id="mermaid-tooltip-3" class="mermaidTooltip">

</div>
<p></p>
<p>Publication JPA annotations</p>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<p>

</p><pre class="mermaid mermaid-js" data-tooltip-selector="#mermaid-tooltip-4">classDiagram
    direction BT

    %% Relationships
    LibraryMember ..&gt; Person
    Author ..&gt; Person

    Staff ..o StaffMember
    StaffMember ..&gt; LibraryMember

    User ..o LibraryMember
    
    Librarian ..o StaffMember

    class Person {
        @MappedSuperClass
    }

    class Author {
        \@Entity(name = "Author")
        \@Table(name = "AUTHOR_TABLE")
    }

    class LibraryMember {
        \@Entity(name = "LibraryMember")
        \@Table(name = "LIBRARYMEMBER_TABLE")
        \@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
        \@DiscriminatorColumn(name = "MEMBER_TYPE", discriminatorType = discriminatorType.STRING)
    }

    class StaffMember {
        @MappedSuperClass
    }

    class User {
        \@Entity(name = "User")
        \@DiscriminatorValue(value = "USER")
    }

    class Staff {
        \@Entity(name = "Staff")
        \@DiscriminatorValue(value = "STAFF")
    }

    class Librarian {
        \@Entity(name = "Librarian")
        \@DiscriminatorValue(value = "LIBRARIAN")
    }
</pre>
<div id="mermaid-tooltip-4" class="mermaidTooltip">

</div>
<p></p>
<p>LibraryMember JPA annotations</p>
</div>
</div>
</div>
<p>The resulting tables in the DB are as follow:</p>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 30.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="../../images/java-labs/h2-library-tables.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Library DB tables</figcaption><p></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 70.0%;justify-content: center;">
<ul>
<li><code>AUTHOR_TABLE</code>: Inherits <code>Person</code> fields and adds its own <code>Id</code> and <code>penName</code></li>
<li><code>LIBRARY_MEMBER</code>: Here it inherits:
<ul>
<li><code>Person</code> fields</li>
<li>Adds its own <code>Id</code>, <code>address</code> and <code>phoneNumber</code> fields</li>
<li>Adds the <code>StaffMember</code>’s <code>salary</code> field</li>
<li>And also adds the <code>User</code>’s <code>mail</code> and <code>password</code> fields</li>
</ul></li>
<li><code>PUBLICATION_TABLE</code>: Here the inheritance is as follows:
<ul>
<li>Adds its own <code>Publication</code> fields, including the <code>Id</code> field</li>
<li>Adds the <code>Book</code>’s fields</li>
<li>Adds the <code>CD</code>’s fields</li>
<li>Adds the <code>DVD</code> fields, even though they overlap with the <code>CD</code> ones</li>
<li>And also adds the <code>Author ID</code> of that publication, coming from the <code>Author</code> entity. The <code>@ManyToOne</code> annotation can be verified in the Indexes of <code>PUBLICATION_TABLE</code>, where <code>AUTHOR_ID</code> appears as <em>Not unique</em></li>
</ul></li>
</ul>
</div>
</div>
</div>
</section>
</section>
<section id="defining-the-use-cases" class="level2">
<h2 class="anchored" data-anchor-id="defining-the-use-cases">Defining the use cases</h2>
<section id="creating-a-publication" class="level3">
<h3 class="anchored" data-anchor-id="creating-a-publication">Creating a publication</h3>
<p>It seems that we’ll have to work with particular publications instead of creating a one-size-fits-all solution, but the inheritance is well solved in the Thymeleaf form and the object is correctly composed when the request reaches the <code>PublicationController</code>.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Attention when creating new entities!
</div>
</div>
<div class="callout-body-container callout-body">
<p>The Spring boot controller sends a new empty Publication object to the thymeleaf engine with its already generated ID, but if the ID isn’t assigned again in the creation form, then the Controller recreates the object with a new ID!</p>
<p>Make sure to add a <code>th:field=*{id}</code> entry in the form to make sure that later <code>@Setter</code> methods will re-assign that value to the object</p>
</div>
</div>
</section>
<section id="creating-a-libary-member" class="level3">
<h3 class="anchored" data-anchor-id="creating-a-libary-member">Creating a Libary Member</h3>
<p>Inheritance is causing issues when trying to save the attributes of child classes:</p>
<ul>
<li>Only <code>Person</code> attributes and the <code>id</code> created in the abstract <code>LibraryMember</code> are considered when Thymeleaf sends the form values to the <code>@Controller</code>, still don’t know why</li>
<li>This doesn’t happen with the current <code>Publication</code> implementation, where all fields, including <code>@Many-to-one</code> and <code>enum</code> types when creating a new <code>Book</code> from the Publication Form View</li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Error found!! Missing <code>@Setter</code> annotations in all <code>@Entity</code> classes!!
</div>
</div>
<div class="callout-body-container callout-body">
<p>I forgot to add the <code>@Setter</code> annotation in all <code>@Entity</code> classes except the parent one! <span class="emoji" data-emoji="disappointed_relieved">😥</span></p>
<p>Once added the <code>@Setter</code> annotation, tables are correctly populated!</p>
</div>
</div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Extra: Avoid JPA inheritance of non-entity classes!!
</div>
</div>
<div class="callout-body-container callout-body">
<p>As discussed <a href="https://stackoverflow.com/questions/57536887/jpa-inheritance-attributes-from-non-entity-class">in this StackOverflow thread</a>,the only way to do this is by removing the inheritance from these classes and mark the previously parent class as <code>@Embeddable</code>, while defining new parent class attribute to each of the previously called child classes and annotating them as <code>@Embedded</code>.</p>
<p>This doesn’t make it easier to maintain as shown <a href="https://www.baeldung.com/jpa-embedded-embeddable">in this Baeldung example</a>, and in the OOP realm we would have to access a new Person object for each derivated class.</p>
<p>Also, <a href="https://www.baeldung.com/hibernate-inheritance#mappedsuperclass">this Baeldung article</a> explains that when using <code>@MappedSuperclass</code>, ancestors cannot contain associations with other entities. <del>This might be the reason why it doesn’t work well with <code>Librarian</code> and <code>User</code>?</del></p>
</div>
</div>
</section>
</section>
<section id="updating-publications-or-library-members" class="level2">
<h2 class="anchored" data-anchor-id="updating-publications-or-library-members">Updating publications or library members</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
ID is correctly transfered to the <code>Optional&lt;Subclass&gt;</code> when dealing with Publication updates
</div>
</div>
<div class="callout-body-container callout-body">
<p>This requires further investigation because, while using a very similar form, it looks like the Parent class ID is safely transfered when recreating the object on the <code>@Controller</code> side. This doesn’t happen when the recreated class doesn’t inherit the ID from another class.</p>
<p>Also, this ID problem also appears on subclasses creation forms. Does it have something to do with the GET/POST or RequestMapping annotations?</p>
</div>
</div>
</section>
<section id="creating-borrows" class="level2">
<h2 class="anchored" data-anchor-id="creating-borrows">Creating Borrows</h2>
<p>The <code>Borrow</code> class contains the information related to a <code>Publication</code> that has been borrowed by a <code>LibraryMember</code>. The instantiated object contains the following fields:</p>
<ul>
<li><code>id</code>: the unique ID of that <code>Borrow</code></li>
<li><code>borrowUser</code>: the user of this <code>Borrow</code></li>
<li><code>borrowedPublication</code>: the publication borrowed</li>
<li><code>startBorrowDate</code>: the date where the <code>Borrow</code> was created. It is automatically initialized on <code>Borrow</code> creation</li>
<li><code>dueBorrowDate</code>: the date where the <code>Borrow</code> should already be returned. It is automatically initialized on <code>Borrow</code> creation, 15 days from the <code>startBorrowDate</code></li>
<li><code>returnedBorrowDate</code>: the real date where the <code>Borrow</code> has been returned. Initialized as <code>null</code> on <code>Borrow</code> creation.</li>
<li><code>borrowStatus</code>: The current <code>Borrow</code> status, either <code>IN_PROGRESS</code>, <code>LATE</code> or <code>CLOSED</code>. The <code>borrowStatus</code> should be automatically updated depending on the <code>dueBorrowDate</code> and the current date (<code>IN_PROGRESS</code> or <code>LATE</code>), as well as the <code>returnedBorrowDate</code> (<code>CLOSED</code>)</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<p>

</p><pre class="mermaid mermaid-js" data-tooltip-selector="#mermaid-tooltip-5">classDiagram
    direction LR
    Borrow --&gt; Publication
    Borrow --&gt; LibraryMember
    Borrow --&gt; BorrowStatus
    %% Abstract class
    class Publication {
        \@Entity(name = "Publication")
        \@Table(name = "PUBLICATION_TABLE")
    }
    class LibraryMember {
        \@Entity(name = "LibraryMember")
        \@Table(name = "LIBRARYMEMBER_TABLE")
    }
    class Borrow {
        @Id
        - id: String
        @Column
        - borrowUser: LibraryMember
        @Column
        - borrowedPublication: Publication
        @DateTimeFormat
        - startBorrowDate: LocalDate
        @DateTimeFormat
        - dueBorrowDate: LocalDate
        @DateTimeFormat
        - returnedBorrowDate: LocalDate
        @Enumerate
        - borrowStatus: BorrowStatus
    }
    class BorrowStatus {GameStats
        IN_PROGRESS
        LATE
        CLOSED
    }

</pre>
<div id="mermaid-tooltip-5" class="mermaidTooltip">

</div>
<p></p>
</div>
</div>
</div>
<section id="create-borrow-entity-and-repository" class="level3">
<h3 class="anchored" data-anchor-id="create-borrow-entity-and-repository">Create Borrow Entity and Repository</h3>
<p><code>Borrow</code> entities are named <code>Borrow</code> and stored in a <code>@Table</code> named <code>BORROW_TABLE</code>. The repository interface is a <code>CrudRepository</code> that will be extended with additional methods whenever required.</p>
</section>
<section id="create-borrow-service-and-controller" class="level3">
<h3 class="anchored" data-anchor-id="create-borrow-service-and-controller">Create Borrow Service and Controller</h3>
<p>The <code>BorrowController</code> has the following methods:</p>
<ul>
<li><code>index</code>: renders the Borrows main page</li>
<li><code>createBorrow</code> (GET): a <code>GetMapping</code> that prepares <code>Model</code> object with the required attributes for Thymeleaf to render the Borrow creation form.
<ul>
<li>If the request doesn’t send a <code>LibraryMember</code> ID, then the response includes a list of <code>LibraryMember</code> objects so Thymeleaf renders a selection list</li>
<li>If the request sends a <code>LibraryMember</code> ID, then the response sends again that ID and Thymeleaf doesn’t render a list of <code>LibraryMember</code> objects</li>
</ul></li>
<li><code>createBorrow</code> (POST): a <code>PostMapping</code> that takes an ID, either as a <code>PathVariable</code> or a <code>RequestParam</code>, and a list of <code>Publication</code> IDs, and creates a Borrow for each one
<ul>
<li>If the request doesn’t send a <code>PathVariable</code>, then the received request is from a <code>Borrow</code> form with selectable <code>LibraryMember</code>, and thus the method will redirect to the same selectable <code>LibraryMember</code> form</li>
<li>Else, the method will redirect to the Borrow form with the same <code>PathVariable</code> ID</li>
</ul></li>
<li><code>updateBorrow</code> (GET): a <code>GetMapping</code> that retrieves the <code>Borrow</code> object that matches the retrieved <code>id</code> by <code>PathVariable</code> and inserts it into the <code>Model</code> object for Thymeleaf to render.</li>
<li><code>updateBorrow</code> (POST): a <code>PostMapping</code> that takes an ID as a <code>PathVariable</code> and an <code>Optional&lt;Borrow&gt;</code> object and proceeds to update it in the DataBase, if it exists.</li>
<li><code>deleteBorrow</code> (GET): a <code>GetMapping</code> that takes an ID as a <code>PathVariable</code> and deletes its corresponding <code>Borrow</code> from the database if it exists.</li>
</ul>
<p>The <code>BorrowService</code> has the following methods:</p>
<ul>
<li><code>getBorrowById</code>: return a <code>Borrow</code> if the provided ID exists in the database</li>
<li><code>createBorrow</code>: insert a <code>Borrow</code> in the database if its ID doesn’t exist in the database</li>
<li><code>createMultipleBorrows</code>: given a <code>User</code> ID and a list of <code>Publication</code> IDs, create and save into the database a <code>Borrow</code> for each <code>Publication</code> assigned to that <code>User</code> and return the list of created <code>Borrows</code></li>
<li><code>deleteBorrowById</code>: delete a <code>Borrow</code> from the database if the provided ID exists. When deleting the <code>Borrow</code>, its <code>Publication</code> status is set to <code>AVAILABLE</code></li>
<li><code>updateBorrow</code>: update a <code>Borrow</code> in the database with the updated information from the client request.
<ul>
<li>Only <code>borrowStatus</code> should be available for update.</li>
</ul></li>
</ul>
</section>
</section>
<section id="updating-a-borrow" class="level2">
<h2 class="anchored" data-anchor-id="updating-a-borrow">Updating a <code>Borrow</code></h2>
<p>When updating a <code>Borrow</code>, a similar form as when creating one shall appear, but only Borrow status should be updatable at the moment (there’s no reason to change neither the borrow user nor the borrowed publication, as well as the borrow dates, which should be automatically updated based on the Borrow status). - If <code>Borrow.borrowStatus</code> is set to <code>IN_PROGRESS</code> and previous value was different, then the <code>dueBorrowDate</code> is set to 15 days from the current time - If <code>Borrow.borrowStatus</code> is set to <code>CLOSED</code> and previous value was different, then the <code>returnedBorrowDate</code> is set to the current time</p>
</section>
<section id="using-http-session-to-store-user-information" class="level2">
<h2 class="anchored" data-anchor-id="using-http-session-to-store-user-information">Using HTTP session to store User information</h2>
<p>We’ll use an HTTP session to show all borrows of a specific user. The user information will be stored in the HTTP session instead of transferred on each request-response cycle as <code>@PathVariable</code> or <code>@RequestParam</code></p>
<p>On login stage, we’ll store the following session attributes:</p>
<ul>
<li><code>isLoggedIn</code>: whether the user has already logged in or not</li>
<li><code>memberId</code>: the ID of the Library Member logged in</li>
<li><code>memberClass</code>: the class of the Library Member (User, LibraryMember, Staff…)</li>
<li><code>memberName</code>: the full name of the Library Member for rendering purposes</li>
</ul>
</section>
<section id="log-in-log-out-process" class="level2">
<h2 class="anchored" data-anchor-id="log-in-log-out-process">Log in / Log out process</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
TODO: implement and document
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</section>
</section>
<section id="integrating-mongodb" class="level1">
<h1>Integrating MongoDB</h1>
<section id="dependencies" class="level2">
<h2 class="anchored" data-anchor-id="dependencies">Dependencies</h2>
</section>
<section id="changes-in-current-classes" class="level2">
<h2 class="anchored" data-anchor-id="changes-in-current-classes">Changes in current classes</h2>
</section>
<section id="repositories-for-mongodb" class="level2">
<h2 class="anchored" data-anchor-id="repositories-for-mongodb">Repositories for MongoDB</h2>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../java-exercises/Labs/java-se03-1.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">LAB#SE03-1: Library/Book core model</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../java-exercises/Principles/01-abstraction.html" class="pagination-link">
        <span class="nav-page-text">Abstraction</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">
        <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
</ul>
      </div>
  </div>
</footer>



</body></html>